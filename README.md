# image_vulnerability_report
Image Vulnerability Report script retrieve the whole list of container images along with CVE and software packages details for every container image in the retrieved list.

## Goal:
The main purpose of this script is to generate a report to retrieve the whole list of container images along with CVE and software packages details for every container image in the retrieved list. the script exports these results into external CSV file format.

## Requirements:
- CloudPassage Halo API key (with Auditor privileges).
- Python 3.6 or later including packages specified in "requirements.txt".

## Installation:
```
   git clone https://github.com/cloudpassage/image_vulnerability_report.git
   cd image_vulnerability_report
   pip install -r requirements.txt
```

## Configuration:
| Variable | Description | Default Value |
| -------- | ----- | ----- |
| HALO_API_KEY | ID of HALO API Key | ef\*\*ds\*\*fa |
| HALO_API_SECRET_KEY | Secret of HALO API Key | fgfg\*\*\*\*\*heyw\*\*\*\*ter352\*\*\* |
| HALO_API_HOSTNAME | Halo API Host Name | https://api.cloudpassage.com |
| HALO_API_PORT | Halo API Port Number | 443 |
| HALO_API_VERSION | HALO EndPoint Version | v2 |
| OUTPUT_DIRECTORY | Location for generated CSV file | /var/log |

## How the scripts works:
- Checking and validation of the provided configuration parameters and fails in case of missing any required parameter.
- Use HALO API key id/secret to generate access token to be used to access Protected HALO resources.
- Retrieving the whole list of container images along with CVE and software packages details for every container images.
- Preparing image vulnerability report statistics (i.e. Percetnage of Vulnerable Images, Percentage of Non-Vulnerable Images).
- Exporting all retreived image vulnerability report data of into CSV file format.

## How to run the tool (stand-alone):
To run the script follow the below steps.

1.  Navigate to the app folder that contains module "runner.py", and run it

```
    cd image_vulnerability_report/app
    python runner.py
```